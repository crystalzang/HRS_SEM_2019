hhour.z~ R_ADL
exp.z ~  S_ADL
S_self_health ~ S_ADL
R_self_health ~ R_ADL
S_income_i.z ~  S_ADL
R_income_i.z ~ R_ADL
R_hostital_stay.z~ R_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
varTable(fit_f)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
library(semPlot)
semPaths(fit_f)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
varTable(model_f)
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(dplyr)
library(ggplot2)
library(lavaan)
library(semPlot)
model_f <- '
S_CESD ~ S_ADL  + exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL
exp.z ~  S_ADL
S_self_health ~ S_ADL
R_self_health ~ R_ADL
S_income_i.z ~  S_ADL
R_income_i.z ~ R_ADL
R_hostital_stay.z~ R_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
varTable(fit_f)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
semPaths(fit_f)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
#smaller model
model_f <- '
S_CESD ~ S_ADL  + exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
exp.z ~  R_ADL + S_ADL
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
varTable(fit_f)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
#smaller model
model_f <- '
S_CESD ~ S_ADL  + exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
exp.z ~  R_ADL + S_ADL
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ R_self_health
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
#smaller model
model_f <- '
S_CESD ~ S_ADL  + exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
exp.z ~  R_ADL + S_ADL
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL  + exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
exp.z ~  R_ADL + S_ADL
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
exp.z ~  S_income_i.z
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL  + exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL + R_ADL + exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
dyad_female_helper <- dyad_helper_f_edit %>%
filter(sex=="2.Female")%>%
filter(R_ADL>0)%>%
filter(HHIDPN != 204936010) %>%
mutate(expenditure=S_expense+R_expense) %>%
mutate(S_exp.z=scale(S_expense, center = TRUE, scale = TRUE)) %>%
mutate(R_exp.z=scale(R_expense, center = TRUE, scale = TRUE)) %>%
mutate(exp.z=scale(expenditure, center = TRUE, scale = TRUE)) %>%
mutate(hhour.z=scale(helper_time,center=TRUE,scale=TRUE))%>%
mutate(R_income_i.z = scale(R_income_i,center=TRUE,scale=TRUE))%>%
mutate(S_income_i.z = scale(S_income_i,center=TRUE,scale=TRUE))%>%
mutate(R_hostital_stay.z = scale(R_hostital_stay,center=TRUE,scale=TRUE))
model_f <- '
S_CESD ~ S_ADL + R_ADL + R_exp.z + S_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
#smaller model
model_f <- '
S_CESD ~ S_ADL + R_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
varTable(fit_f)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
dyad_helper_f_edit<- dyad_helper_f%>%
mutate(S_self_health = if_else(S_self_health == "1.Excellent", 1,
if_else(S_self_health == "2.Very good", 2,
if_else(S_self_health == "3.Good", 3,
if_else(S_self_health == "4.Fair", 4,5)))))%>%
mutate(R_self_health = if_else(R_self_health == "1.Excellent", 1,
if_else(R_self_health == "2.Very good", 2,
if_else(R_self_health == "3.Good", 3,
if_else(R_self_health == "4.Fair", 4,5))))) %>%
mutate(R_self_health_change = if_else(R_self_health_change  == "2.Somewhat better", 0,
if_else(R_self_health_change == "3.Same", 1, 2)))%>%
mutate(S_self_health_change = if_else(S_self_health_change=="2.Somewhat better", 0,
if_else(S_self_health_change == "3.Same", 1, 2)))%>%
mutate(R_drug =if_else(R_drug == "1.Yes", 1, 0)) %>%
mutate(S_drug =if_else(S_drug == "1.Yes", 1, 0)) %>%
mutate(R_surgery =if_else(R_surgery == "1.Yes", 1, 0)) %>%
mutate(S_surgery=if_else(S_surgery == "1.Yes", 1, 0)) %>%
mutate(R_special_hservice=if_else(R_special_hservice == "1.Yes", 1, 0)) %>%
mutate(S_special_hservice=if_else(S_special_hservice == "1.Yes", 1, 0))
dyad_female_helper <- dyad_helper_f_edit %>%
filter(sex=="2.Female")%>%
filter(R_ADL>1)%>%
filter(HHIDPN != 204936010) %>%
mutate(expenditure=S_expense+R_expense) %>%
mutate(S_exp.z=scale(S_expense, center = TRUE, scale = TRUE)) %>%
mutate(R_exp.z=scale(R_expense, center = TRUE, scale = TRUE)) %>%
mutate(exp.z=scale(expenditure, center = TRUE, scale = TRUE)) %>%
mutate(hhour.z=scale(helper_time,center=TRUE,scale=TRUE))%>%
mutate(R_income_i.z = scale(R_income_i,center=TRUE,scale=TRUE))%>%
mutate(S_income_i.z = scale(S_income_i,center=TRUE,scale=TRUE))%>%
mutate(R_hostital_stay.z = scale(R_hostital_stay,center=TRUE,scale=TRUE))
model_f <- '
S_CESD ~ S_ADL + R_ADL + exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
#smaller model
model_f <- '
S_CESD ~ S_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL +R_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL + S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL +R_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
View(dyad_female_helper)
model_f <- '
S_CESD ~ S_ADL +R_ADL +age
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL +R_ADL +age+cohort
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
dyad_helper_f_edit<- dyad_helper_f%>%
mutate(S_self_health = if_else(S_self_health == "1.Excellent", 1,
if_else(S_self_health == "2.Very good", 2,
if_else(S_self_health == "3.Good", 3,
if_else(S_self_health == "4.Fair", 4,5)))))%>%
mutate(R_self_health = if_else(R_self_health == "1.Excellent", 1,
if_else(R_self_health == "2.Very good", 2,
if_else(R_self_health == "3.Good", 3,
if_else(R_self_health == "4.Fair", 4,5))))) %>%
mutate(R_self_health_change = if_else(R_self_health_change  == "2.Somewhat better", 0,
if_else(R_self_health_change == "3.Same", 1, 2)))%>%
mutate(S_self_health_change = if_else(S_self_health_change=="2.Somewhat better", 0,
if_else(S_self_health_change == "3.Same", 1, 2)))%>%
mutate(R_drug =if_else(R_drug == "1.Yes", 1, 0)) %>%
mutate(S_drug =if_else(S_drug == "1.Yes", 1, 0)) %>%
mutate(R_surgery =if_else(R_surgery == "1.Yes", 1, 0)) %>%
mutate(S_surgery=if_else(S_surgery == "1.Yes", 1, 0)) %>%
mutate(R_special_hservice=if_else(R_special_hservice == "1.Yes", 1, 0)) %>%
mutate(S_special_hservice=if_else(S_special_hservice == "1.Yes", 1, 0))
dyad_female_helper <- dyad_helper_f_edit %>%
filter(sex=="2.Female")%>%
filter(R_ADL>2)%>%
filter(HHIDPN != 204936010) %>%
mutate(expenditure=S_expense+R_expense) %>%
mutate(S_exp.z=scale(S_expense, center = TRUE, scale = TRUE)) %>%
mutate(R_exp.z=scale(R_expense, center = TRUE, scale = TRUE)) %>%
mutate(exp.z=scale(expenditure, center = TRUE, scale = TRUE)) %>%
mutate(hhour.z=scale(helper_time,center=TRUE,scale=TRUE))%>%
mutate(R_income_i.z = scale(R_income_i,center=TRUE,scale=TRUE))%>%
mutate(S_income_i.z = scale(S_income_i,center=TRUE,scale=TRUE))%>%
mutate(R_hostital_stay.z = scale(R_hostital_stay,center=TRUE,scale=TRUE))
model_f <-
S_CESD ~ S_ADL +R_ADL +age
'
model_f <- '
S_CESD ~ S_ADL +R_ADL +age
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
semPaths(fit_f)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL +R_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL + S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
dyad_helper_f_edit<- dyad_helper_f%>%
mutate(S_self_health = if_else(S_self_health == "1.Excellent", 1,
if_else(S_self_health == "2.Very good", 2,
if_else(S_self_health == "3.Good", 3,
if_else(S_self_health == "4.Fair", 4,5)))))%>%
mutate(R_self_health = if_else(R_self_health == "1.Excellent", 1,
if_else(R_self_health == "2.Very good", 2,
if_else(R_self_health == "3.Good", 3,
if_else(R_self_health == "4.Fair", 4,5))))) %>%
mutate(R_self_health_change = if_else(R_self_health_change  == "2.Somewhat better", 0,
if_else(R_self_health_change == "3.Same", 1, 2)))%>%
mutate(S_self_health_change = if_else(S_self_health_change=="2.Somewhat better", 0,
if_else(S_self_health_change == "3.Same", 1, 2)))%>%
mutate(R_drug =if_else(R_drug == "1.Yes", 1, 0)) %>%
mutate(S_drug =if_else(S_drug == "1.Yes", 1, 0)) %>%
mutate(R_surgery =if_else(R_surgery == "1.Yes", 1, 0)) %>%
mutate(S_surgery=if_else(S_surgery == "1.Yes", 1, 0)) %>%
mutate(R_special_hservice=if_else(R_special_hservice == "1.Yes", 1, 0)) %>%
mutate(S_special_hservice=if_else(S_special_hservice == "1.Yes", 1, 0))
dyad_female_helper <- dyad_helper_f_edit %>%
filter(sex=="2.Female")%>%
filter(R_ADL>0)%>%
filter(HHIDPN != 204936010) %>%
mutate(expenditure=S_expense+R_expense) %>%
mutate(S_exp.z=scale(S_expense, center = TRUE, scale = TRUE)) %>%
mutate(R_exp.z=scale(R_expense, center = TRUE, scale = TRUE)) %>%
mutate(exp.z=scale(expenditure, center = TRUE, scale = TRUE)) %>%
mutate(hhour.z=scale(helper_time,center=TRUE,scale=TRUE))%>%
mutate(R_income_i.z = scale(R_income_i,center=TRUE,scale=TRUE))%>%
mutate(S_income_i.z = scale(S_income_i,center=TRUE,scale=TRUE))%>%
mutate(R_hostital_stay.z = scale(R_hostital_stay,center=TRUE,scale=TRUE))
model_f <- '
S_CESD ~ S_ADL +R_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL + S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health  +age
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
age ~ R_ADL
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
id_m<-dyad_helper_m_join2%>%
select(HHIDPN) #Already unique
id_f<-dyad_helper_f_join2%>%
select(HHIDPN)#Already unique
#list of unique id
id <- rbind(id_m, id_f)
id_unique<-id[!duplicated(id$HHIDPN), ]
id_ls <- id_unique$HHIDPN
#dyad_all <- rbind(dyad_helper_m_join2, dyad_helper_f_join2)
#In f but not in m
dyad_diff <- anti_join(dyad_helper_m_join2, dyad_helper_f_join2, by="HHIDPN")
dyad_all<-rbind(dyad_helper_f_join2, dyad_diff)
table(dyad_all$R_ADL)
data <- dyad_all%>%
filter(R_ADL > 0)
knitr::opts_chunk$set(echo = TRUE)
psych<- read_sav("~/Desktop/data/H14LB_R.sav", encoding = NULL, user_na = FALSE)
knitr::opts_chunk$set(echo = TRUE)
library(haven)
library(data.table)
psych<- read_sav("~/Desktop/data/H14LB_R.sav", encoding = NULL, user_na = FALSE)
head(psych)
psych_data <- psych %>%
select(HHID,PN,OPN_SP,OLB018A,OLB018B,OLB018C,OLB018D,OLB018E,OLB018F,OLB018G,OLB018H,OLB018I,OLB018J)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(readr)
library(haven)
library(data.table)
library(ggplot2)
library(mosaic)
library(skimr)
#functions
'%ni%' <- Negate('%in%')
library(haven)
library(data.table)
head(psych)
psych_data <- psych %>%
select(HHID,PN,OPN_SP,OLB018A,OLB018B,OLB018C,OLB018D,OLB018E,OLB018F,OLB018G,OLB018H,OLB018I,OLB018J)
View(psych_data)
psych_data1 <- psych %>%
select(HHID,PN,OPN_SP,OLB018A,OLB018B,OLB018C,OLB018D,OLB018E,OLB018F,OLB018G,OLB018H,OLB018I,OLB018J)
psych_data2<- psych_data1%>%
filter(!is.na(OPN_SP))%>%
filter(OPN_SP %ni% c("","811", "812", "821", "831", "832", "841", "822"))%>%
#  mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, OPN_SP, sep=""))
mutate(respondent_id= 1000*HHID + PN, spouse_id=1000*HHID + OPN_SP)
H14G_HP$HHID<- as.numeric(H14G_HP$HHID)
psych_data1 $HHID<- as.numeric(psych_data1 $HHID)
psych_data1 $PN<- as.numeric(psych_data1 $PN)
psych_data1 $OPN_SP<- as.numeric(psych_data1 $OPN_SP)
psych_data2<- psych_data1%>%
filter(!is.na(OPN_SP))%>%
filter(OPN_SP %ni% c("","811", "812", "821", "831", "832", "841", "822"))%>%
#  mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, OPN_SP, sep=""))
mutate(respondent_id= 1000*HHID + PN, spouse_id=1000*HHID + OPN_SP)
View(psych_data2)
