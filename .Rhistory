knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(readr)
library(haven)
library(data.table)
#setwd("/Users/crystalzang/Desktop/data")
#individual
h16_R_all <- read_csv("~/Desktop/data/h16_R_all.csv")
#household
#h16_H_all <- read_csv("~/Desktop/HRS_SEM/h16_H_all.csv")
#Helper
helper<- read_sav("/Users/crystalzang/Desktop/data/spss/H16G_HP.sav", encoding = NULL, user_na = FALSE)%>%
mutate(respondent_id= paste(HHID, PN, sep=""))
h16_R_all_id <- h16_R_all%>%
mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, PPN_SP, sep=""))
test<- h16_R_all_id%>%
group_by(respondent_id, spouse_id)%>%
summarize(N=n())
View(test)
test<-h16_R_all%>%
select(PPN_SP)
h16_R_all_id <- h16_R_all%>%
filter(!is.na(PPN_SP))%>%
mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, PPN_SP, sep=""))
h16_R_all_id <- h16_R_all%>%
filter(!is.na(PPN_SP))%>%
mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, PPN_SP, sep=""))
test<-h16_R_all%>%
select(PPN_SP)
h16_R_all_id <- h16_R_all%>%
filter(!is.na(PPN_SP))%>%
filter(PPN_SP < 100)%>%
mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, PPN_SP, sep=""))
h16_R_all_id <- h16_R_all%>%
filter(!is.na(PPN_SP))%>%
filter(PPN_SP < 100)%>%
mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, PPN_SP, sep=""))
test<-h16_R_all%>%
select(PPN_SP)
class(h16_R_all$PPN_SP)
h16_R_all$PPN_SP_double<-as.numeric(h16_R_all$PPN_SP)
test<-h16_R_all%>%
select(PPN_SP_double)
test<-h16_R_all%>%
select(PPN_SP_double,PPN_SP)
h16_R_all_id <- h16_R_all%>%
filter(!is.na(PPN_SP))%>%
filter(PPN_SP !%in% c("811", "812", "821", "831", "832"))%>%
'%ni%' <- Negate('%in%')
h16_R_all_id <- h16_R_all%>%
filter(!is.na(PPN_SP))%>%
filter(PPN_SP %ni% c("811", "812", "821", "831", "832"))%>%
mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, PPN_SP, sep=""))
h16_R_all_id <- h16_R_all%>%
filter(!is.na(PPN_SP))%>%
filter(PPN_SP %ni% c("811", "812", "821", "831", "832"))%>%
mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, PPN_SP, sep=""))
test<-h16_R_all%>%
select(PPN_SP_double,PPN_SP)
test<-h16_R_all_id%>%
select(PPN_SP_double,PPN_SP)
test<-h16_R_all_id%>%
select(PPN_SP)
h16_R_all_id <- h16_R_all%>%
filter(!is.na(PPN_SP))%>%
filter(PPN_SP %ni% c("811", "812", "821", "831", "832", "841", "822"))%>%
mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, PPN_SP, sep=""))
test<-h16_R_all_id%>%
select(PPN_SP)
test<- h16_R_all_id%>%
group_by(respondent_id, spouse_id)%>%
summarize(N=n())
test<- h16_R_all_id%>%
group_by(respondent_id)%>%
summarize(N=n())
View(h16_R_all_id)
