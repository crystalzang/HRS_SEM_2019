hhour.z~ R_ADL + S_ADL
exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
dyad_female_helper <- dyad_helper_f_edit %>%
filter(sex=="2.Female")%>%
filter(R_ADL>0)%>%
filter(HHIDPN != 204936010) %>%
mutate(expenditure=S_expense+R_expense) %>%
mutate(S_exp.z=scale(S_expense, center = TRUE, scale = TRUE)) %>%
mutate(R_exp.z=scale(R_expense, center = TRUE, scale = TRUE)) %>%
mutate(exp.z=scale(expenditure, center = TRUE, scale = TRUE)) %>%
mutate(hhour.z=scale(helper_time,center=TRUE,scale=TRUE))%>%
mutate(R_income_i.z = scale(R_income_i,center=TRUE,scale=TRUE))%>%
mutate(S_income_i.z = scale(S_income_i,center=TRUE,scale=TRUE))%>%
mutate(R_hostital_stay.z = scale(R_hostital_stay,center=TRUE,scale=TRUE))
model_f <- '
S_CESD ~ S_ADL + R_ADL + R_exp.z + S_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
#smaller model
model_f <- '
S_CESD ~ S_ADL + R_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
varTable(fit_f)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
dyad_helper_f_edit<- dyad_helper_f%>%
mutate(S_self_health = if_else(S_self_health == "1.Excellent", 1,
if_else(S_self_health == "2.Very good", 2,
if_else(S_self_health == "3.Good", 3,
if_else(S_self_health == "4.Fair", 4,5)))))%>%
mutate(R_self_health = if_else(R_self_health == "1.Excellent", 1,
if_else(R_self_health == "2.Very good", 2,
if_else(R_self_health == "3.Good", 3,
if_else(R_self_health == "4.Fair", 4,5))))) %>%
mutate(R_self_health_change = if_else(R_self_health_change  == "2.Somewhat better", 0,
if_else(R_self_health_change == "3.Same", 1, 2)))%>%
mutate(S_self_health_change = if_else(S_self_health_change=="2.Somewhat better", 0,
if_else(S_self_health_change == "3.Same", 1, 2)))%>%
mutate(R_drug =if_else(R_drug == "1.Yes", 1, 0)) %>%
mutate(S_drug =if_else(S_drug == "1.Yes", 1, 0)) %>%
mutate(R_surgery =if_else(R_surgery == "1.Yes", 1, 0)) %>%
mutate(S_surgery=if_else(S_surgery == "1.Yes", 1, 0)) %>%
mutate(R_special_hservice=if_else(R_special_hservice == "1.Yes", 1, 0)) %>%
mutate(S_special_hservice=if_else(S_special_hservice == "1.Yes", 1, 0))
dyad_female_helper <- dyad_helper_f_edit %>%
filter(sex=="2.Female")%>%
filter(R_ADL>1)%>%
filter(HHIDPN != 204936010) %>%
mutate(expenditure=S_expense+R_expense) %>%
mutate(S_exp.z=scale(S_expense, center = TRUE, scale = TRUE)) %>%
mutate(R_exp.z=scale(R_expense, center = TRUE, scale = TRUE)) %>%
mutate(exp.z=scale(expenditure, center = TRUE, scale = TRUE)) %>%
mutate(hhour.z=scale(helper_time,center=TRUE,scale=TRUE))%>%
mutate(R_income_i.z = scale(R_income_i,center=TRUE,scale=TRUE))%>%
mutate(S_income_i.z = scale(S_income_i,center=TRUE,scale=TRUE))%>%
mutate(R_hostital_stay.z = scale(R_hostital_stay,center=TRUE,scale=TRUE))
model_f <- '
S_CESD ~ S_ADL + R_ADL + exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
#smaller model
model_f <- '
S_CESD ~ S_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL+ S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL +R_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL + S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL +R_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
View(dyad_female_helper)
model_f <- '
S_CESD ~ S_ADL +R_ADL +age
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL +R_ADL +age+cohort
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
dyad_helper_f_edit<- dyad_helper_f%>%
mutate(S_self_health = if_else(S_self_health == "1.Excellent", 1,
if_else(S_self_health == "2.Very good", 2,
if_else(S_self_health == "3.Good", 3,
if_else(S_self_health == "4.Fair", 4,5)))))%>%
mutate(R_self_health = if_else(R_self_health == "1.Excellent", 1,
if_else(R_self_health == "2.Very good", 2,
if_else(R_self_health == "3.Good", 3,
if_else(R_self_health == "4.Fair", 4,5))))) %>%
mutate(R_self_health_change = if_else(R_self_health_change  == "2.Somewhat better", 0,
if_else(R_self_health_change == "3.Same", 1, 2)))%>%
mutate(S_self_health_change = if_else(S_self_health_change=="2.Somewhat better", 0,
if_else(S_self_health_change == "3.Same", 1, 2)))%>%
mutate(R_drug =if_else(R_drug == "1.Yes", 1, 0)) %>%
mutate(S_drug =if_else(S_drug == "1.Yes", 1, 0)) %>%
mutate(R_surgery =if_else(R_surgery == "1.Yes", 1, 0)) %>%
mutate(S_surgery=if_else(S_surgery == "1.Yes", 1, 0)) %>%
mutate(R_special_hservice=if_else(R_special_hservice == "1.Yes", 1, 0)) %>%
mutate(S_special_hservice=if_else(S_special_hservice == "1.Yes", 1, 0))
dyad_female_helper <- dyad_helper_f_edit %>%
filter(sex=="2.Female")%>%
filter(R_ADL>2)%>%
filter(HHIDPN != 204936010) %>%
mutate(expenditure=S_expense+R_expense) %>%
mutate(S_exp.z=scale(S_expense, center = TRUE, scale = TRUE)) %>%
mutate(R_exp.z=scale(R_expense, center = TRUE, scale = TRUE)) %>%
mutate(exp.z=scale(expenditure, center = TRUE, scale = TRUE)) %>%
mutate(hhour.z=scale(helper_time,center=TRUE,scale=TRUE))%>%
mutate(R_income_i.z = scale(R_income_i,center=TRUE,scale=TRUE))%>%
mutate(S_income_i.z = scale(S_income_i,center=TRUE,scale=TRUE))%>%
mutate(R_hostital_stay.z = scale(R_hostital_stay,center=TRUE,scale=TRUE))
model_f <-
S_CESD ~ S_ADL +R_ADL +age
'
model_f <- '
S_CESD ~ S_ADL +R_ADL +age
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
semPaths(fit_f)
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
model_f <- '
S_CESD ~ S_ADL +R_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL + S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
dyad_helper_f_edit<- dyad_helper_f%>%
mutate(S_self_health = if_else(S_self_health == "1.Excellent", 1,
if_else(S_self_health == "2.Very good", 2,
if_else(S_self_health == "3.Good", 3,
if_else(S_self_health == "4.Fair", 4,5)))))%>%
mutate(R_self_health = if_else(R_self_health == "1.Excellent", 1,
if_else(R_self_health == "2.Very good", 2,
if_else(R_self_health == "3.Good", 3,
if_else(R_self_health == "4.Fair", 4,5))))) %>%
mutate(R_self_health_change = if_else(R_self_health_change  == "2.Somewhat better", 0,
if_else(R_self_health_change == "3.Same", 1, 2)))%>%
mutate(S_self_health_change = if_else(S_self_health_change=="2.Somewhat better", 0,
if_else(S_self_health_change == "3.Same", 1, 2)))%>%
mutate(R_drug =if_else(R_drug == "1.Yes", 1, 0)) %>%
mutate(S_drug =if_else(S_drug == "1.Yes", 1, 0)) %>%
mutate(R_surgery =if_else(R_surgery == "1.Yes", 1, 0)) %>%
mutate(S_surgery=if_else(S_surgery == "1.Yes", 1, 0)) %>%
mutate(R_special_hservice=if_else(R_special_hservice == "1.Yes", 1, 0)) %>%
mutate(S_special_hservice=if_else(S_special_hservice == "1.Yes", 1, 0))
dyad_female_helper <- dyad_helper_f_edit %>%
filter(sex=="2.Female")%>%
filter(R_ADL>0)%>%
filter(HHIDPN != 204936010) %>%
mutate(expenditure=S_expense+R_expense) %>%
mutate(S_exp.z=scale(S_expense, center = TRUE, scale = TRUE)) %>%
mutate(R_exp.z=scale(R_expense, center = TRUE, scale = TRUE)) %>%
mutate(exp.z=scale(expenditure, center = TRUE, scale = TRUE)) %>%
mutate(hhour.z=scale(helper_time,center=TRUE,scale=TRUE))%>%
mutate(R_income_i.z = scale(R_income_i,center=TRUE,scale=TRUE))%>%
mutate(S_income_i.z = scale(S_income_i,center=TRUE,scale=TRUE))%>%
mutate(R_hostital_stay.z = scale(R_hostital_stay,center=TRUE,scale=TRUE))
model_f <- '
S_CESD ~ S_ADL +R_ADL + R_exp.z + R_income_i.z + S_self_health + R_self_health
R_CESD ~ R_ADL+ S_ADL + S_self_health + R_self_health + S_income_i.z + S_self_health + R_self_health  +age
hhour.z~ R_ADL + S_ADL
S_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
R_exp.z ~  R_ADL + S_ADL  +  S_income_i.z
S_self_health ~ R_ADL + S_ADL
R_self_health ~ R_ADL + S_ADL
S_income_i.z ~  R_ADL + S_ADL
R_income_i.z ~ R_ADL + S_ADL
R_hostital_stay.z~ R_ADL + S_ADL
S_ADL ~~  R_ADL
S_CESD ~~ R_CESD
S_self_health ~~ S_self_health_change
R_self_health ~~ R_self_health_change
age ~ R_ADL
S_self_health_change ~ R_ADL + S_ADL
R_self_health_change ~ R_ADL + S_ADL
'
fit_f <- sem(model_f, data = dyad_female_helper, estimator="MLMV")
summary(fit_f,standardized = TRUE, fit.measures = TRUE)
id_m<-dyad_helper_m_join2%>%
select(HHIDPN) #Already unique
id_f<-dyad_helper_f_join2%>%
select(HHIDPN)#Already unique
#list of unique id
id <- rbind(id_m, id_f)
id_unique<-id[!duplicated(id$HHIDPN), ]
id_ls <- id_unique$HHIDPN
#dyad_all <- rbind(dyad_helper_m_join2, dyad_helper_f_join2)
#In f but not in m
dyad_diff <- anti_join(dyad_helper_m_join2, dyad_helper_f_join2, by="HHIDPN")
dyad_all<-rbind(dyad_helper_f_join2, dyad_diff)
table(dyad_all$R_ADL)
data <- dyad_all%>%
filter(R_ADL > 0)
knitr::opts_chunk$set(echo = TRUE)
psych<- read_sav("~/Desktop/data/H14LB_R.sav", encoding = NULL, user_na = FALSE)
knitr::opts_chunk$set(echo = TRUE)
library(haven)
library(data.table)
psych<- read_sav("~/Desktop/data/H14LB_R.sav", encoding = NULL, user_na = FALSE)
head(psych)
psych_data <- psych %>%
select(HHID,PN,OPN_SP,OLB018A,OLB018B,OLB018C,OLB018D,OLB018E,OLB018F,OLB018G,OLB018H,OLB018I,OLB018J)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(readr)
library(haven)
library(data.table)
library(ggplot2)
library(mosaic)
library(skimr)
#functions
'%ni%' <- Negate('%in%')
library(haven)
library(data.table)
head(psych)
psych_data <- psych %>%
select(HHID,PN,OPN_SP,OLB018A,OLB018B,OLB018C,OLB018D,OLB018E,OLB018F,OLB018G,OLB018H,OLB018I,OLB018J)
View(psych_data)
psych_data1 <- psych %>%
select(HHID,PN,OPN_SP,OLB018A,OLB018B,OLB018C,OLB018D,OLB018E,OLB018F,OLB018G,OLB018H,OLB018I,OLB018J)
psych_data2<- psych_data1%>%
filter(!is.na(OPN_SP))%>%
filter(OPN_SP %ni% c("","811", "812", "821", "831", "832", "841", "822"))%>%
#  mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, OPN_SP, sep=""))
mutate(respondent_id= 1000*HHID + PN, spouse_id=1000*HHID + OPN_SP)
H14G_HP$HHID<- as.numeric(H14G_HP$HHID)
psych_data1 $HHID<- as.numeric(psych_data1 $HHID)
psych_data1 $PN<- as.numeric(psych_data1 $PN)
psych_data1 $OPN_SP<- as.numeric(psych_data1 $OPN_SP)
psych_data2<- psych_data1%>%
filter(!is.na(OPN_SP))%>%
filter(OPN_SP %ni% c("","811", "812", "821", "831", "832", "841", "822"))%>%
#  mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, OPN_SP, sep=""))
mutate(respondent_id= 1000*HHID + PN, spouse_id=1000*HHID + OPN_SP)
View(psych_data2)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(readr)
library(haven)
library(data.table)
library(ggplot2)
library(mosaic)
library(skimr)
#functions
'%ni%' <- Negate('%in%')
library(haven)
library(data.table)
psych<- read_sav("~/Desktop/data/H14LB_R.sav", encoding = NULL, user_na = FALSE)
psych_data1 <- psych %>%
select(HHID,PN,OPN_SP,OLB018A,OLB018B,OLB018C,OLB018D,OLB018E,OLB018F,OLB018G,OLB018H,OLB018I,OLB018J, OLB004A,OLB004B,OLB004C,OLB004D,OLB004E,OLB004F,OLB004G,OLB005, OLB005A, OLB005B)
psych_data1 $HHID<- as.numeric(psych_data1 $HHID)
psych_data1 $PN<- as.numeric(psych_data1 $PN)
psych_data1 $OPN_SP<- as.numeric(psych_data1 $OPN_SP)
psych_data2<- psych_data1%>%
filter(!is.na(OPN_SP))%>%
filter(OPN_SP %ni% c("","811", "812", "821", "831", "832", "841", "822"))%>%
#  mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, OPN_SP, sep=""))
mutate(respondent_id= 1000*HHID + PN, spouse_id=1000*HHID + OPN_SP)
write.csv(psych_data2, file= "psych_data.csv")
dyad_helper_f <- read_csv("data/dyad_helper_f.csv")
dyad_helper_m <- read_csv("data/dyad_helper_m.csv")
View(dyad_helper_f)
View(psych_data2)
dyad_helper_f_psy <- left_join(dyad_helper_f, psych_data2, by=c("HHIDPN" = "respondent_id"))
View(dyad_helper_f_psy)
setnames(psych_data2 ,
old=c("OLB018A","OLB018B","OLB018C","OLB018D","OLB018E","OLB018F","OLB018G","OLB018H","OLB018I","OLB018J",
"OLB004A","OLB004B","OLB004C","OLB004D","OLB004E","OLB004F","OLB004G",
"OLB005", "OLB005A", "OLB005B"
),
new = c("optimism_A", "optimism_B", "optimism_C","optimism_D", "optimism_E","optimism_F","optimism_G","optimism_H","optimism_I","optimism_J",
"sp_emotion_inteligenceA", "sp_emotion_inteligenceB", "sp_emotion_inteligenceC","sp_emotion_inteligenceD","sp_emotion_inteligenceE", "sp_emotion_inteligenceF", "sp_emotion_inteligenceG",
"sp_relation", "sp_relationA", "sp_relatioB"
))
write.csv(psych_data2, file= "psych_data.csv")
dyad_helper_f_psy <- left_join(dyad_helper_f, psych_data2, by=c("HHIDPN" = "respondent_id"))
dyad_helper_m_psy <- left_join(dyad_helper_m, psych_data2, by=c("HHIDPN" = "respondent_id"))
write.csv(dyad_helper_f_psy, file= "dyad_helper_f_psych.csv")
write.csv(dyad_helper_m_psy, file= "dyad_helper_m_psych.csv")
setnames(psych_data2 ,
old=c("OLB018A","OLB018B","OLB018C","OLB018D","OLB018E","OLB018F","OLB018G","OLB018H","OLB018I","OLB018J",
"OLB004A","OLB004B","OLB004C","OLB004D","OLB004E","OLB004F","OLB004G",
"OLB005", "OLB005A", "OLB005B"
),
new = c("optimism_A", "optimism_B", "optimism_C","optimism_D", "optimism_E","optimism_F","optimism_G","optimism_H","optimism_I","optimism_J",
"sp_eqA", "sp_eqB", "sp_eqC","sp_eqD","sp_eqE", "sp_eqF", "sp_eqG",
"sp_relation", "sp_relationA", "sp_relatioB"
))
psych_data2<- psych_data1%>%
filter(!is.na(OPN_SP))%>%
filter(OPN_SP %ni% c("","811", "812", "821", "831", "832", "841", "822"))%>%
#  mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, OPN_SP, sep=""))
mutate(respondent_id= 1000*HHID + PN, spouse_id=1000*HHID + OPN_SP)
setnames(psych_data2 ,
old=c("OLB018A","OLB018B","OLB018C","OLB018D","OLB018E","OLB018F","OLB018G","OLB018H","OLB018I","OLB018J",
"OLB004A","OLB004B","OLB004C","OLB004D","OLB004E","OLB004F","OLB004G",
"OLB005", "OLB005A", "OLB005B"
),
new = c("optimism_A", "optimism_B", "optimism_C","optimism_D", "optimism_E","optimism_F","optimism_G","optimism_H","optimism_I","optimism_J",
"sp_eqA", "sp_eqB", "sp_eqC","sp_eqD","sp_eqE", "sp_eqF", "sp_eqG",
"sp_relation", "sp_relationA", "sp_relatioB"
))
dyad_helper_f_psy <- left_join(dyad_helper_f, psych_data2, by=c("HHIDPN" = "respondent_id"))
write.csv(dyad_helper_f_psy, file= "data/dyad_helper_f_psych.csv")
dyad_helper_m_psy <- left_join(dyad_helper_m, psych_data2, by=c("HHIDPN" = "respondent_id"))
write.csv(dyad_helper_m_psy, file= "data/dyad_helper_m_psych.csv")
psych_data2<- psych_data1%>%
filter(!is.na(OPN_SP))%>%
filter(OPN_SP %ni% c("","811", "812", "821", "831", "832", "841", "822"))%>%
#  mutate(respondent_id= paste(HHID, PN, sep=""), spouse_id=paste(HHID, OPN_SP, sep=""))
mutate(respondent_id= 1000*HHID + PN, spouse_id=1000*HHID + OPN_SP)
setnames(psych_data2 ,
old=c("OLB018A","OLB018B","OLB018C","OLB018D","OLB018E","OLB018F","OLB018G","OLB018H","OLB018I","OLB018J",
"OLB004A","OLB004B","OLB004C","OLB004D","OLB004E","OLB004F","OLB004G",
"OLB005", "OLB005A", "OLB005B"
),
new = c("optimism_A", "optimism_B", "optimism_C","optimism_D", "optimism_E","optimism_F","optimism_G","optimism_H","optimism_I","optimism_J",
"sp_eqA", "sp_eqB", "sp_eqC","sp_eqD","sp_eqE", "sp_eqF", "sp_eqG",
"sp_relation", "sp_relationA", "sp_relationB"
))
dyad_helper_f_psy <- left_join(dyad_helper_f, psych_data2, by=c("HHIDPN" = "respondent_id"))
write.csv(dyad_helper_f_psy, file= "data/dyad_helper_f_psych.csv")
dyad_helper_m_psy <- left_join(dyad_helper_m, psych_data2, by=c("HHIDPN" = "respondent_id"))
write.csv(dyad_helper_m_psy, file= "data/dyad_helper_m_psych.csv")
??qnorm
??qnorm
16.11+20.23+23.77+27.89
pchisq(9.6,2,lower.tail = FALSE)
qnorm(0.2, mean=25, sd = 10)
qnorm(0.4, mean=25, sd = 10)
qnorm(0.6, mean=25, sd = 10)
qnorm(0.8, mean=25, sd = 10)
pchisq(23.833,2,lower.tail = FALSE)
qnorm(0.2, mean=30.328, sd = 6.54)
qnorm(0.4, mean=30.328, sd = 6.54)
qnorm(0.6, mean=30.328, sd = 6.54)
qnorm(0.8, mean=30.328, sd = 6.54)
pchisq(1.5,2,lower.tail = FALSE)
pchisq(23.833,4,lower.tail = FALSE)
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(dplyr)
GSS2002 <- read_csv("~/Desktop/Junior Spring 2019/Math Stats/HW10/GSS2002.csv")
head(GSS2002)
table(GSS2002$Happy, useNA = "a")
table(GSS2002$Gender, useNA="a")
GSS2002 <- GSS2002 %>%
filter(!is.na(Happy))
tb <- GSS2002%>%
group_by(Gender, Happy)%>%
summarize(N=n())
happy<-c(rep("Not Happy", 170), rep("Pretty Happy", 784), rep("Very Happy", 415))
gender<-c(rep(1, 61), rep(0, 109), rep(1, 378), rep(0, 406),
rep(1, 210), rep(0, 205))
table(gender, happy)
table(gender, happy)
#-- Define a function to calculate the test statistic for a data table
chisq<-function(obs.data){
exp.data<-outer(rowSums(obs.data), colSums(obs.data))/sum(obs.data)
sum((obs.data-exp.data)*(obs.data-exp.data)/exp.data)
}
#calculate the stat on our original data
stat<-chisq(table(gender, happy))
stat
#do many iterations
N<-1000
dist<-numeric(N)
for(i in (1: N)){
permuted.gender<- sample(gender) #permute SDS vector
permuted.table<-table(permuted.gender, happy)
dist[i] <-chisq(permuted.table)
}
#visualize distribution
hist(dist)
abline(v=stat)
#calculate p-value
mean(dist>=stat)
#calculate p-value
mean(dist>=stat)
